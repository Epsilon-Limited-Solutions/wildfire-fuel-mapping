version: '3.8'

services:
  webapp:
    build:
      context: .
      dockerfile: Dockerfile.simple
    container_name: wildfire-fuel-mapping-webapp
    ports:
      - "8080:5000"
    volumes:
      # Mount data directories (read-only)
      - ../data:/app/data:ro
      - ../outputs:/app/outputs:ro
      # Mount maps directory to serve HTML maps
      - ../outputs/maps:/app/frontend/static/maps:ro
    environment:
      - FLASK_ENV=development
      - FLASK_APP=backend/app_simple.py
      - PYTHONPATH=/app
    restart: unless-stopped
    command: python backend/app_simple.py
